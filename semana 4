from datetime import datetime

class Paciente:
    def __init__(self, nombre, cedula, telefono):
        self.nombre = nombre
        self.cedula = cedula
        self.telefono = telefono

    def mostrar_info(self):
        print(f"Nombre: {self.nombre}")
        print(f"CÃ©dula: {self.cedula}")
        print(f"TelÃ©fono: {self.telefono}")
        print("-------------------------")

class Turno:
    def __init__(self, paciente, fecha_hora):
        self.paciente = paciente
        self.fecha_hora = fecha_hora

    def mostrar_turno(self):
        print("\n---- Turno ----")
        print(f"Paciente: {self.paciente.nombre}")
        print(f"CÃ©dula: {self.paciente.cedula}")
        print(f"TelÃ©fono: {self.paciente.telefono}")
        print(f"Fecha y hora del turno: {self.fecha_hora.strftime('%Y-%m-%d %H:%M')}")
        print("----------------")

def agregar_paciente(lista_pacientes):
    nombre = input("Ingrese nombre del paciente: ")
    cedula = input("Ingrese cÃ©dula: ")
    telefono = input("Ingrese telÃ©fono: ")

    paciente = Paciente(nombre, cedula, telefono)
    lista_pacientes.append(paciente)
    print("âœ… Paciente agregado con Ã©xito.")

def buscar_paciente_por_cedula(lista_pacientes, cedula):
    for paciente in lista_pacientes:
        if paciente.cedula == cedula:
            return paciente
    return None

def agendar_turno(lista_pacientes, lista_turnos):
    cedula = input("Ingrese la cÃ©dula del paciente: ")
    paciente = buscar_paciente_por_cedula(lista_pacientes, cedula)

    if paciente is None:
        print("âŒ Paciente no encontrado. Debe agregarlo primero.")
        return

    fecha_input = input("Ingrese fecha del turno (YYYY-MM-DD): ")
    hora_input = input("Ingrese hora del turno (HH:MM): ")

    try:
        fecha_hora = datetime.strptime(f"{fecha_input} {hora_input}", "%Y-%m-%d %H:%M")
        turno = Turno(paciente, fecha_hora)
        lista_turnos.append(turno)
        print("âœ… Turno agendado con Ã©xito.")
    except ValueError:
        print("âŒ Fecha u hora invÃ¡lida.")

def mostrar_turnos(lista_turnos):
    if not lista_turnos:
        print("ğŸ“­ No hay turnos registrados.")
    else:
        print("\nğŸ“‹ LISTA DE TURNOS:")
        for turno in lista_turnos:
            turno.mostrar_turno()

def mostrar_pacientes(lista_pacientes):
    if not lista_pacientes:
        print("ğŸ“­ No hay pacientes registrados.")
    else:
        print("\nğŸ‘¥ LISTA DE PACIENTES:")
        for paciente in lista_pacientes:
            paciente.mostrar_info()

def menu_principal():
    lista_pacientes = []
    lista_turnos = []

    while True:
        print("\nğŸ¥ AGENDA DE CLÃNICA")
        print("1. Agregar Paciente")
        print("2. Agendar Turno")
        print("3. Mostrar Turnos")
        print("4. Mostrar Pacientes")
        print("5. Volver al menÃº principal (Reiniciar menÃº)")

        opcion = input("Seleccione una opciÃ³n: ")

        if opcion == "1":
            agregar_paciente(lista_pacientes)
        elif opcion == "2":
            agendar_turno(lista_pacientes, lista_turnos)
        elif opcion == "3":
            mostrar_turnos(lista_turnos)
        elif opcion == "4":
            mostrar_pacientes(lista_pacientes)
        elif opcion == "5":
            print("ğŸ”„ Volviendo al menÃº principal...")
            continue
        else:
            print("âŒ OpciÃ³n no vÃ¡lida. Intente nuevamente.")

if __name__ == "__main__":
    menu_principal()
